<?xml version="1.0" encoding="UTF-8"?>
<odoo>
   <data>
      <record id="view_picking_form_inherit" model="ir.ui.view">
         <field name="name">stock picking inherit</field>
         <field name="model">stock.picking</field>
         <field name="priority">11</field>
         <field name="inherit_id" ref="stock.view_picking_form" />
         <field name="arch" type="xml">
          	<!-- 
            <xpath expr="//button[@name='action_confirm']" position="attributes">
               <attribute name="context">{'default_picking_type_id':picking_type_id}</attribute>
            </xpath>
            
             <field name="name" position="attributes">
             	<attribute name="force_save">1</attribute>
             </field> -->

             <xpath expr="//button[5]" position="before">
             </xpath>
             <xpath expr="//button[5]" position="after">
                <button name="validate_cua_ben_giao" attrs="{'invisible': [('show_validate_ben_giao', '=', False)]}" string="Xác nhận ben giao" groups="stock.group_stock_user" type="object" class="oe_highlight"/>
              	<button name="%(stock.act_stock_return_picking)d" string="Hủy biên bản"  context="{'huy_bien_ban':True}"
              	attrs="{'invisible': ['|', ('state', '!=', 'done'), ('is_locked', '=', False)]}" type="action" groups="base.group_user"/>
            </xpath>
              
              <xpath expr="//button[@name='action_confirm']" position="attributes">
               <attribute name="groups">base.group_erp_manager</attribute>
            </xpath>
            
           <xpath expr="//button[5]" position="attributes">
               <attribute name="invisible">True</attribute>
            </xpath>
            
            
              <xpath expr="//button[@name='action_cancel']" position="attributes">
               <attribute name="groups">base.group_erp_manager</attribute>
            </xpath>
             <xpath expr="//button[@name='action_assign']" position="attributes">
               <attribute name="groups">base.group_erp_manager</attribute>
            </xpath>
          
            <xpath expr="//button[@name='action_toggle_is_locked']" position="attributes">
               <attribute name="invisible">1</attribute>
            </xpath>
             <!--  <xpath expr="//button[@name='action_toggle_is_locked']" position="attributes">
               <attribute name="attrs">{'invisible':True}</attribute>
            </xpath> -->
            <xpath expr="//button[@name='button_scrap']" position="attributes">
               <attribute name="invisible">1</attribute>
            </xpath>
             <xpath expr="//button[@name='do_unreserve']" position="attributes">
               <attribute name="invisible">1</attribute>
            </xpath>
         <!--   <xpath expr="//button[@name='do_print_picking']" position="attributes">
               <attribute name="groups">base.group_erp_manager</attribute>
               <attribute name="attrs">{'invisible':True}</attribute>
               <attribute name="invisible">1</attribute>
               <attribute name="string">Buon qua</attribute>
            </xpath> --> 
            <xpath expr="//button[@name='do_print_picking']" position="replace"></xpath>
            <xpath expr="//button[@name='action_toggle_is_locked']" position="after">
             <!--  <button name="action_draft" string="Draft" type="object" />  -->
              <button name="ghom_stock_move_lines" string="Tạo Bản In" type="object"  invisible="1"/> 
               <button name="xem_print_theo_move_line" string="Xem biên bản theo move line html" type="object"  invisible="1" />
               <button name="xem_print" string="Xem biên bản html" type="object"  />
               <button name="xem_print_pdf" string="Xem biên bản pdf" type="object" />
            </xpath>
            
            <!-- 
            <xpath expr="//page[3]/group/group/field[@name='picking_type_id']" position="attributes">
               <attribute name="invisible">1</attribute>
            </xpath>
             -->
             
            <field name="location_id" position="replace">
               <field name="id" />
              <!--  <field name="cancel_mode" /> -->
               <field name="location_id" domain="['|',('department_id','child_of', department_id),('cho_phep_khac_tram_chon','=', True)]" />
               <field name="department_id" />
               <field name="noi_ban_giao" />
               <field name="lot_id"></field>
             <!--   <field name="stt_bien_ban" /> -->
             <field name="stt_trong_bien_ban_in" readonly="0"/>
               <field name="texttemplate_id" context="{'default_field_context':'tonkho.stock.picking.field.ly_do'}"/>
            </field>
            <field name="origin" position="attributes">
               <attribute name="invisible">1</attribute>
            </field>
            
             <field name="partner_id" position="attributes">
               <attribute name="invisible">1</attribute>
            </field>
            
            <field name="scheduled_date" position="replace">
               <field name="date" />
               <field name="choosed_stock_quants_ids"  invisible="1">
               	<tree>
               		<field name="id"></field>
               	</tree>
               </field>
            </field>
            <field name="location_dest_id" position="replace" />
            <field name="origin" position="before">
             	<field name="show_validate_ben_giao" invisible="1"></field>
               <field name="location_dest_id" domain="['|',('usage','=','internal'),('cho_phep_khac_tram_chon','=', True),'|',('name','not ilike','Đang chạy'),('department_id','=', department_id)]" />
               <field name="ban_giao_or_nghiem_thu" />
               <field name="ma_bien_ban" readonly="0" />
               <field name="totrinh_id" />
               <field name="ly_do" />
               <field name="ten_truoc_huy"  invisible="1"/>
             <!--   <field name="state" readonly="0" force_save="1"></field> -->
             <!-- 
               <field name="start_date"></field>
               <field name="end_date"></field>
               <field name="duration"></field>
                -->
           </field>
            <xpath expr="//page[1]" position="attributes">
               <attribute name="attrs">{'invisible': False}</attribute>
            </xpath>
          
          
            <xpath expr="//page[1]/field[@name='move_line_ids']" position="attributes">
              <attribute name="attrs">{}</attribute> 
              
             <attribute name="context">{'default_picking_id': id, 'default_location_id': location_id, 'default_location_dest_id': location_dest_id,'ban_giao_or_nghiem_thu':ban_giao_or_nghiem_thu}</attribute> 
            </xpath>
            
            
 
            <xpath expr="//page[1]/field/tree/field[@name='product_uom_qty']" position="attributes">
               <attribute name="groups">base.group_erp_manager</attribute>
            </xpath>
             
             
             <xpath expr="//page[1]/field/tree/field[@name='product_id']" position="attributes">
               <attribute name="attrs">{'readonly': [('parent.state', 'in', ('cancel','done'))]}</attribute>
            </xpath>
    
              <xpath expr="//page[1]/field/tree/field[@name='location_id']" position="attributes">
               <attribute name="attrs">{}</attribute>
            </xpath>
             <xpath expr="//page[1]/field/tree/field[@name='location_dest_id']" position="attributes">
               <attribute name="attrs">{'readonly': ['|',('in_entire_package', '=', True),('state', 'in', ('done', 'cancel'))]}</attribute>
            </xpath>
            
            
             <xpath expr="//page[1]/field/tree/field[@name='lot_id']" position="attributes">
               <attribute name="attrs">{'column_invisible': [('parent.show_lots_text', '=', True)], 'invisible': [('lots_visible', '=', False)], 'readonly': ['|',('in_entire_package', '=', True),('state', 'in', ('done', 'cancel'))]}</attribute>
            </xpath>
             
             
            
            
             <xpath expr="//page[1]/field/tree/field[@name='qty_done']" position="attributes">
               <attribute name="attrs">{'readonly': [('state', 'in', ('done', 'cancel'))]}</attribute>
            </xpath>
            
            
           
            <xpath expr="//page[1]/field/tree/field[@name='product_id']" position="before">
               <field name="stock_quant_id" domain="[('location_id','child_of',parent.location_id),('quantity','&gt;',0)]"   
               context="{'kho_da_chon':parent.choosed_stock_quants_ids}"
               attrs="{'readonly': [('state', 'in', ('done', 'cancel'))]}"
               />
            </xpath>
            
            <xpath expr="//page[1]/field/tree/field[@name='lot_id']" position="replace"></xpath>
            	<field name="product_uom_id" force_save="1" readonly="1"
            	 groups="product.group_uom"/>
   
            <xpath expr="//page[1]/field/tree/field[@name='product_uom_id']" position="after">
               <field name="tracking" readonly="1"></field>
             <!--   <field name="product_qty"></field> -->
               <field name="lot_id" invisible="0" 
               attrs="{'column_invisible': [('parent.show_lots_text', '=', True)],
                'invisible': ['|',('lots_visible', '=', False),('tracking', '=', 'none')],
                'readonly': ['|',('in_entire_package', '=', True),
                ('state', 'in', ('done', 'cancel'))]}"
                groups="stock.group_production_lot" domain="[('product_id', '=', product_id)]" context="{'default_product_id': product_id}" /><!-- ,'readonly': ['|',('in_entire_package', '=', True),('state', 'in', ('done', 'cancel'))] -->
               
               <field name="tinh_trang"  attrs="{'readonly': [('state', 'in', ('done','cancel'))]}"></field>
               <field name="ghi_chu"></field>
            </xpath>
            <xpath expr="//page[1]/field/tree/field[@name='lot_id']" position="attributes">
               <attribute name="string">Serial number</attribute>
            </xpath>
            <xpath expr="//page[1]/field/tree/field[@name='product_uom_qty']" position="attributes">
           
            </xpath>
          <xpath expr="//page[2]" position="attributes">
               <attribute name="groups">base.group_erp_manager</attribute>
            </xpath>
          
            <xpath expr="//page[3]" position="attributes">
               <attribute name="invisible">1</attribute>
            </xpath>
            
         	  <xpath expr="//page[2]/field[@name='move_lines']" position="attributes">
               <attribute name="attrs">{}</attribute>
         	  </xpath>
            
         	  <xpath expr="//page[2]/field/tree/field[@name='reserved_availability']" position="attributes">
             
               <attribute name="groups">base.group_erp_manager</attribute>
            </xpath>
            
            
             
            
            <xpath expr="//page[1]/field/tree/field[@name='lot_id']" position="after">
                          <field name="pn"  attrs="{'invisible': [('tracking', '=', 'none')],'readonly': [('state', 'in', ('done', 'cancel'))]}" ></field>
                        <!--  <field name="create_date"/>
                          <field name="write_date"/>
                           --> 
            </xpath>
             <!-- toi ngay 07/06 -->
             
              <xpath expr="//page[1]/field/tree/field[@name='state']" position="attributes">
               <attribute name="invisible">0</attribute>
            </xpath>
            
            
            
            <xpath expr="//page[2]/field/tree/field[@name='state']" position="attributes">
               	<attribute name="invisible">0</attribute>
            </xpath>
            
            <xpath expr="//page[2]/field/tree/field[@name='quantity_done']" position="attributes">
               	<attribute name="readonly">0</attribute>
               <!-- 	<attribute name="attrs">{}</attribute> -->
            </xpath>
            
            <xpath expr="//page[2]/field/tree/field[@name='state']" position="after">
               	<field name="move_orig_ids"></field>
               	<field name="move_dest_ids"></field>
            </xpath>
            <xpath expr="//page[2]/field/tree/field[@name='product_uom']" position="after">
               	<field name="ghi_chu"></field>
            </xpath>
            
            <!-- 
            
            <xpath expr="//page[2]/field/tree/field[@name='product_uom_qty']" position="attributes">
               	<attribute name="readonly">0</attribute>
            </xpath>
            
            
            <xpath expr="//page[2]/field/tree/field[@name='show_operations']" position="attributes">
               	<attribute name="invisible">0</attribute>
            </xpath>
            
            <xpath expr="//page[2]/field/tree/field[@name='is_locked']" position="attributes">
               	<attribute name="invisible">0</attribute>
            </xpath> -->
            
             
             <!-- Initial Demand -->
            <xpath expr="//page[2]/field/tree/field[@name='product_uom_qty']" position="attributes"> 
               	<attribute name="attrs">{}</attribute>
            </xpath>
            
            
            
            <!-- 
             <field name="show_operations" position="attributes">
             	<field name="invisible">0</field>
             </field>
             -->
            <!-- end toi ngay 07/06 -->
           
            <xpath expr="//page[3]" position="after">
               <page string="Thông tin thêm">
                  <group>
                     <group>
                        <field name="source_member_ids">
                           <tree>
                              <field name="name" />
                              <field name="department_id" />
                              <field name="job_id" string="Chức vụ" />
                              <field name="parent_id" />
                           </tree>
                        </field>
                        <field name="title_ben_thu_3"/>
                        <field name="ben_thu_3_ids">
                           <tree>
                              <field name="name" />
                              <field name="department_id" />
                              <field name="job_id" string="Chức vụ" />
                              <field name="parent_id" />
                           </tree>
                           </field>
                        <field name="ben_giao_giu" />
                     </group>
                     <group>
                        <field name="dest_member_ids">
                           <tree>
                              <field name="name" />
                              <field name="department_id" />
                              <field name="job_id" string="Chức vụ" />
                              <field name="parent_id" />
                           </tree>
                        </field>
                        <field name="title_ben_thu_4"/>
                        <field name="ben_thu_4_ids">
                           <tree>
                              <field name="name" />
                              <field name="department_id" />
                              <field name="job_id" string="Chức vụ" />
                              <field name="parent_id" />
                           </tree>
                           </field>
                           
                        <field name="ben_nhan_giu" />
                     </group>
                     <group>
                        <field name="so_ban_in" />
                     </group>
                  </group>
               </page>
            </xpath>
         </field>
      </record>
      
      <!-- TREE -->
      
      <record id="cb_vpicktree_inherit" model="ir.ui.view">
         <field name="name">stock.picking.tree_inherit</field>
         <field name="model">stock.picking</field>
         <field name="inherit_id" ref="stock.vpicktree" />
         <field name="arch" type="xml">
            <field name="scheduled_date" position="attributes">
               <attribute name="invisible">1</attribute>
            </field>
            <field name="scheduled_date" position="before">
               <field name="ly_do" />
               <field name="date" />
            </field>
            <xpath expr="//field[@name='location_dest_id']" position="before">
               <field name="department_id" />
               <field name="location_id" />
               <field name="origin_pick_id" />
            </xpath>
            <field name="backorder_id" position="replace" />
            <field name="partner_id" position="replace" />
         </field>
      </record>
      
      
      <record id="view_picking_internal_search" model="ir.ui.view">
         <field name="name">stock.picking.internal.search</field>
         <field name="model">stock.picking</field>
         <field name="inherit_id" ref="stock.view_picking_internal_search" />
         <field name="arch" type="xml">
            <field name="product_id" position="after">
               <field name="location_id" />
            </field>
         </field>
      </record>
      <!--! TREE -->
      
      
		<!-- SEARCH -->
      
      <record id="view_picking_internal_search" model="ir.ui.view">
         <field name="name">stock.picking.internal.search</field>
         <field name="model">stock.picking</field>
         <field name="inherit_id" ref="stock.view_picking_internal_search" />
         <field name="arch" type="xml">
            <field name="product_id" position="after">
               <field name="location_id" />
            </field>
         </field>
      </record>
   </data>
</odoo>
		<!-- !SEARCH -->
