<?xml version="1.0" encoding="UTF-8"?>
<odoo>
    <data>
       
        <!-- SEARCH -->
        
          
        
        <record id="view_picking_internal_search" model="ir.ui.view">
            <field name="name">stock.picking.internal.search</field>
            <field name="model">stock.picking</field>
            <field name="inherit_id" ref="stock.view_picking_internal_search" />
            <field name="arch" type="xml">
                <field name="product_id" position="after">
                    <field name="location_id" />
                    <filter name="loc_khong_phai_huy" string="Không Hủy" domain="[('ban_giao_or_nghiem_thu','not in',['HUY'])]"></filter>
                    <separator />
                    <filter name="loc_khong_phai_tra_do_huy" string="Không Trả do Hủy" domain="[('ban_giao_or_nghiem_thu','not in',['TRA_DO_HUY'])]"></filter>
             		 <separator />
                  	<filter name="recently" string="Thay đổi gần đây" domain="[('write_date','&gt;', (datetime.datetime.now() - datetime.timedelta(hours=7,minutes=5)).strftime('%Y-%%m-%%d %%H:%%M:%%S'))]" help="Pickings that are late on scheduled time" />
                  	<filter name="today" string="Thay đổi trong ngày" domain="[('write_date','&gt;=', (datetime.datetime.now().replace(hour=0,minute=0,second=0) - datetime.timedelta(hours=7)).strftime('%Y-%m-%d %H:%M:%S'))]" help="Pickings that are late on scheduled time" />
                    <filter name="this month" string="Thay đổi tháng này" domain="[('write_date','&gt;=',(datetime.datetime.now().replace(day=1,hour=0,minute=0,second=0)-datetime.timedelta(hours=7)).strftime('%Y-%%m-%%d %%H:%%M:%%S'))]" help="Chọn tháng này" />
                   <!--   <filter name="last month" string="Thay đổi tháng trước" domain="[('write_date','&gt;=',(datetime.datetime.now().replace(day=1,hour=0,minute=0,second=0)-datetime.timedelta(months=1,hours=7)).strftime('%Y-%m-%d %H:%M:%S')),('write_date','&lt;',(datetime.datetime.now().replace(day=1,hour=0,minute=0,second=0)-datetime.timedelta(hours=7)).strftime('%Y-%m-%d %H:%M:%S'))]" help="Chọn tháng này" />-->
                   <!-- <filter name="last month" string="CV Tháng Trước" domain="[('write_date','&gt;=',(datetime.datetime.now().replace(day=1,hour=0,minute=0,second=0) +relativedelta(months=-1) - datetime.timedelta(hours=7) ).strftime('%Y-%m-%d %H:%M:%S '))]" help="Chọn tháng này" /> -->  
                </field>
            </field>
        </record>
        <record id="stock.action_picking_tree_all" model="ir.actions.act_window">
         
        </record>
        
        
        <record id="view_picking_internal_search_tonkho" model="ir.ui.view">
            <field name="name">stock.picking.internal.search</field>
            <field name="model">stock.picking</field>
            <field name="arch" type="xml">
                <search string="Picking Lists">
                    <field name="name" string="tên" filter_domain="['|',('name','ilike', self),('origin','ilike',self)]"/>
                    <field name="product_id"/>
                    <filter name="draft" string="Draft" domain="[('state','=','draft')]" help="Draft Moves"/>
                   <!-- 
                    <filter name="available" string="Ready" domain="[('state','in',('assigned', 'partially_available'))]" help="Assigned Moves"/>
                    <filter name="waiting" string="Waiting Availability" domain="[('state','in', ('confirmed', 'waiting'))]" help="Waiting Moves"/>
                    <filter name="confirmed" string="Confirmed" domain="[('state','in', ('confirmed', 'waiting', 'assigned'))]" help="Confirmed Moves"/>
                    -->
                    <filter name="done" string="Done" domain="[('state','=','done')]" help="Pickings already processed"/>
                    <separator/>
                     <!-- 
                    <filter name="late" string="Late" domain="[('scheduled_date','&lt;', time.strftime('%%Y-%%m-%%d %%H:%%M:%%S'))]" help="Pickings that are late on scheduled time"/>
                    <separator/>
                   
                    <filter name="backorder" string="Backorders" domain="[('backorder_id','!=', False)]" help="Remaining parts of picking partially processed"/>
                    <separator/>
                    <filter string="My Activities" name="activities_my"
                        domain="[('activity_ids.user_id', '=', uid)]"/>
                    <separator/>
                    <filter string="Late Activities" name="activities_overdue"
                        domain="[('activity_ids.date_deadline', '&lt;', context_today().strftime('%Y-%m-%d'))]"
                        help="Show all records which has next action date is before today"/>
                    <filter string="Today Activities" name="activities_today"
                        domain="[('activity_ids.date_deadline', '=', context_today().strftime('%Y-%m-%d'))]"/>
                    <filter string="Future Activities" name="activities_upcoming_all"
                        domain="[('activity_ids.date_deadline', '&gt;', context_today().strftime('%Y-%m-%d'))
                        ]"/>
                    <field name="partner_id" filter_domain="[('partner_id','child_of',self)]"/>
                  
                    <field name="product_id"/>
                    
                    <field name="picking_type_id"/>
                     -->
                     
                     <field name="location_id" />
                     <separator />
                    <filter name="loc_khong_phai_huy" string="Không hiển thị BB hủy" domain="[('ban_giao_or_nghiem_thu','not in',['HUY']),('ban_giao_or_nghiem_thu','not in',['TRA_DO_HUY'])]"></filter>
                    <!-- 
                    <filter name="loc_khong_phai_tra_do_huy" string="Không hiển thị BB Trả do Hủy" domain="[('ban_giao_or_nghiem_thu','not in',['TRA_DO_HUY'])]"></filter>
             		 <separator />
             		  -->
                  	<filter name="recently" string="Thay đổi gần đây" domain="[('write_date','&gt;', (datetime.datetime.now() - datetime.timedelta(hours=7,minutes=5)).strftime('%Y-%%m-%%d %%H:%%M:%%S'))]" help="Pickings that are late on scheduled time" />
                  	<filter name="today" string="Thay đổi trong ngày" domain="[('write_date','&gt;=', (datetime.datetime.now().replace(hour=0,minute=0,second=0) - datetime.timedelta(hours=7)).strftime('%Y-%m-%d %H:%M:%S'))]" help="Pickings that are late on scheduled time" />
                    <filter name="this month" string="Thay đổi tháng này" domain="[('write_date','&gt;=',(datetime.datetime.now().replace(day=1,hour=0,minute=0,second=0)-datetime.timedelta(hours=7)).strftime('%Y-%%m-%%d %%H:%%M:%%S'))]" help="Chọn tháng này" />
                    
                    
                    
                    <group expand="0" string="Group By">
                        <filter string="Status" domain="[]" context="{'group_by':'state'}"/>
                      <!-- 
                        <filter string="Order Date" domain="[]"  context="{'group_by':'date'}"/>
                        <filter string="Expected Date" domain="[]"  context="{'group_by':'scheduled_date'}"/>
                        <filter string="Origin" domain="[]" context="{'group_by':'origin'}"/>
                        <filter name="picking_type" string="Operation Type" domain="[]" context="{'group_by':'picking_type_id'}"/>
                        <filter string="Procurement Group" domain="[]" context="{'group_by':'group_id'}"/>
                    -->
                    </group>
                </search>
            </field>
        </record>
        
        <record id="stock.action_picking_tree_all" model="ir.actions.act_window">
        	 <field name="search_view_id" ref="view_picking_internal_search_tonkho"/>
        	   <field name="context">{
                    'contact_display': 'partner_address','search_default_loc_khong_phai_huy':1
            }
            </field>
        </record>
        
       <!-- <menuitem id="stock.menu_stock_inventory_control" name="Master Data" parent="stock.menu_stock_root" sequence="1"/>
         --> 
          <menuitem name="Inventory" id="stock.menu_stock_root" sequence="1"
        groups="stock.group_stock_manager,stock.group_stock_user"
        web_icon="stock,static/description/icon.png"/>
    </data>
</odoo>